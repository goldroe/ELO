Buzz :: struct {
    x: s32;
    y: s32;
}

Foo :: struct {
    buzz1: Buzz;
    buzz2: Buzz;
}

Cell :: struct {
    live: bool;
}

main :: () {
    foo: Foo;
    fp := *foo;
    fp.buzz2.x = 12345;

    numbers := .{19,5,17,6,90,52,31,67,79,57};
    numbers[1] = 100100;

    ptr: *s32;
    ptr.* = 100;

    grid: [64][64]Cell;

    grid[10][10].live = false;

    for i in 0..64 {
        for j in 0..64  {
            grid[i][j].live = 0;
        }
    }

    map_width := 64;
    map_height := 64;

    y := 0;
    x := 0;
    z := 0;

    if x {
        y = y + 1;
        if y {
            z = z + 1;
        } else {
            y = y + 1;
        }
    } else if y {
        z = z + 1;
    } else if z {
        x = x + 1;
    } else {
        x = x - 1;
        y = y - 1;
    }

    x = 0;
    y = 0;
    while y < map_height {
        x = 0;
        while x < map_width {
            live := 0;
            cell := *grid[y][x];

            if y > 0 {
                live = live + grid[y-1][x].live;
                if x > 0 {
                    live = live + grid[y-1][x-1].live;
                }
                if x < map_width - 1 {
                    live = live + grid[y-1][x+1].live;
                }
            }

            if y < map_height - 1 {
                live = live + grid[y + 1][x].live;
                if x > 0 {
                    live = live + grid[y+1][x-1].live;
                }
                if x < map_width - 1 {
                    live = live + grid[y+1][x+1].live;
                }
            }

            if x > 0 {
                live = live + grid[y][x-1].live;
            }

            if x < map_width - 1 {
                live = live + grid[y][x + 1].live;
            }

            if live < 2 {
               cell.live = false;
            }
            if live > 3 {
                cell.live = false;
            }
            if live == 2 {
                cell.live = true;
            }
            live = live + 1;

            x = x + 1;
        }
        y = y + 1;
    }
}